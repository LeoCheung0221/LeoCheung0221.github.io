<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>重拾Android-Java进阶之深入理解IO | ONE·PIECE</title><meta name="description" content="重拾Android-Java进阶之深入理解IO"><meta name="keywords" content="Java进阶"><meta name="author" content="Leo·Cheung,leocheung4ever@gmail.com"><meta name="copyright" content="Leo·Cheung"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="google-site-verification" content="DOzi6zRsQ2GdSxTA0T1-9Ul8fB_XbMM43baLPg1CuOo"><meta name="baidu-site-verification" content="S7HPSRHOBw"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="重拾Android-Java进阶之深入理解IO"><meta name="twitter:description" content="重拾Android-Java进阶之深入理解IO"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/benjamin-elliott-LYdXESrw4dY-unsplash.jpg"><meta property="og:type" content="article"><meta property="og:title" content="重拾Android-Java进阶之深入理解IO"><meta property="og:url" content="http://tufusi.com/2020/05/31/%E9%87%8D%E6%8B%BEAndroid-Java%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3IO/"><meta property="og:site_name" content="ONE·PIECE"><meta property="og:description" content="重拾Android-Java进阶之深入理解IO"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/benjamin-elliott-LYdXESrw4dY-unsplash.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v4.7.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.css"><link rel="canonical" href="http://tufusi.com/2020/05/31/%E9%87%8D%E6%8B%BEAndroid-Java%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3IO/"><link rel="prev" title="重拾Android-Java进阶之RxJava编程原理" href="http://tufusi.com/2020/06/01/%E9%87%8D%E6%8B%BEAndroid-Java%E8%BF%9B%E9%98%B6%E4%B9%8BRxJava%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86/"><link rel="next" title="重拾Android-Java进阶之序列化" href="http://tufusi.com/2020/05/30/%E9%87%8D%E6%8B%BEAndroid-Java%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%BA%8F%E5%88%97%E5%8C%96/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"RG8HX7QXWX","apiKey":"a183cbbffa921b0dddc2872cfd1abd86","indexName":"WEBSITE001","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://tufusi.com/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: {"text":"富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善","fontSize":"15px"},
  medium_zoom: 'true',
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"}
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">ONE·PIECE</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/android/"><i class="fa-fw fa fa-android"></i><span> 重拾Android</span></a></div><div class="menus_item"><a class="site-page" href="/leetcode/"><i class="fa-fw fa fa-diamond"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page" href="/news/"><i class="fa-fw fa fa-newspaper-o"></i><span> AI头条</span></a></div><div class="menus_item"><a class="site-page" href="/papers/"><i class="fa-fw fa fa-paper-plane-o"></i><span> 论文推荐</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-battery-half" aria-hidden="true"></i><span> 充电驿站</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/e-books/"><i class="fa-fw fa fa-book"></i><span> 小书屋</span></a></li><li><a class="site-page" href="/e-movies/"><i class="fa-fw fa fa-film"></i><span> 大影单</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="http://tufusi.com/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">209</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">70</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">8</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/android/"><i class="fa-fw fa fa-android"></i><span> 重拾Android</span></a></div><div class="menus_item"><a class="site-page" href="/leetcode/"><i class="fa-fw fa fa-diamond"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page" href="/news/"><i class="fa-fw fa fa-newspaper-o"></i><span> AI头条</span></a></div><div class="menus_item"><a class="site-page" href="/papers/"><i class="fa-fw fa fa-paper-plane-o"></i><span> 论文推荐</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-battery-half" aria-hidden="true"></i><span> 充电驿站</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/e-books/"><i class="fa-fw fa fa-book"></i><span> 小书屋</span></a></li><li><a class="site-page" href="/e-movies/"><i class="fa-fw fa fa-film"></i><span> 大影单</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#IO框架"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">IO框架</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#IO简介"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">IO简介</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Java-I-O三个层次介绍"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">Java I/O三个层次介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#IO在Android平台应用及其原理"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">IO在Android平台应用及其原理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#设计模式-装饰器模式"><span class="toc_mobile_items-number">2.2.1.</span> <span class="toc_mobile_items-text">设计模式 - 装饰器模式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#字节流"><span class="toc_mobile_items-number">2.2.2.</span> <span class="toc_mobile_items-text">字节流</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#字节流功能分类"><span class="toc_mobile_items-number">2.2.2.1.</span> <span class="toc_mobile_items-text">字节流功能分类</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#FilterOutputStream"><span class="toc_mobile_items-number">2.2.2.1.1.</span> <span class="toc_mobile_items-text">FilterOutputStream</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#BufferedOutputStream"><span class="toc_mobile_items-number">2.2.2.1.2.</span> <span class="toc_mobile_items-text">BufferedOutputStream</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#字符流"><span class="toc_mobile_items-number">2.2.3.</span> <span class="toc_mobile_items-text">字符流</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#字符流功能分类"><span class="toc_mobile_items-number">2.2.3.1.</span> <span class="toc_mobile_items-text">字符流功能分类</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#FilterWriter-FilterReader"><span class="toc_mobile_items-number">2.2.3.1.1.</span> <span class="toc_mobile_items-text">FilterWriter/FilterReader</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#BufferedWriter-BufferedReader"><span class="toc_mobile_items-number">2.2.3.1.2.</span> <span class="toc_mobile_items-text">BufferedWriter/BufferedReader</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#OutputStreamWriter-InputStreamReader"><span class="toc_mobile_items-number">2.2.3.1.3.</span> <span class="toc_mobile_items-text">OutputStreamWriter/InputStreamReader</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#FileReader-FileWriter"><span class="toc_mobile_items-number">2.2.3.1.4.</span> <span class="toc_mobile_items-text">FileReader/FileWriter</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#字节流与字符流"><span class="toc_mobile_items-number">2.2.4.</span> <span class="toc_mobile_items-text">字节流与字符流</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#两者区别"><span class="toc_mobile_items-number">2.2.4.1.</span> <span class="toc_mobile_items-text">两者区别</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#两者转换"><span class="toc_mobile_items-number">2.2.4.2.</span> <span class="toc_mobile_items-text">两者转换</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#IO框架"><span class="toc-number">1.</span> <span class="toc-text">IO框架</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IO简介"><span class="toc-number">2.</span> <span class="toc-text">IO简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-I-O三个层次介绍"><span class="toc-number">2.1.</span> <span class="toc-text">Java I/O三个层次介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IO在Android平台应用及其原理"><span class="toc-number">2.2.</span> <span class="toc-text">IO在Android平台应用及其原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#设计模式-装饰器模式"><span class="toc-number">2.2.1.</span> <span class="toc-text">设计模式 - 装饰器模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字节流"><span class="toc-number">2.2.2.</span> <span class="toc-text">字节流</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#字节流功能分类"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">字节流功能分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#FilterOutputStream"><span class="toc-number">2.2.2.1.1.</span> <span class="toc-text">FilterOutputStream</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BufferedOutputStream"><span class="toc-number">2.2.2.1.2.</span> <span class="toc-text">BufferedOutputStream</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符流"><span class="toc-number">2.2.3.</span> <span class="toc-text">字符流</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#字符流功能分类"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">字符流功能分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#FilterWriter-FilterReader"><span class="toc-number">2.2.3.1.1.</span> <span class="toc-text">FilterWriter/FilterReader</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BufferedWriter-BufferedReader"><span class="toc-number">2.2.3.1.2.</span> <span class="toc-text">BufferedWriter/BufferedReader</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#OutputStreamWriter-InputStreamReader"><span class="toc-number">2.2.3.1.3.</span> <span class="toc-text">OutputStreamWriter/InputStreamReader</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#FileReader-FileWriter"><span class="toc-number">2.2.3.1.4.</span> <span class="toc-text">FileReader/FileWriter</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字节流与字符流"><span class="toc-number">2.2.4.</span> <span class="toc-text">字节流与字符流</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#两者区别"><span class="toc-number">2.2.4.1.</span> <span class="toc-text">两者区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#两者转换"><span class="toc-number">2.2.4.2.</span> <span class="toc-text">两者转换</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/benjamin-elliott-LYdXESrw4dY-unsplash.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">重拾Android-Java进阶之深入理解IO</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-31<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-08-26</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Android/">Android</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>字数总计: </span><span class="word-count">3.4k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>阅读时长: 10 分钟</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p><strong><center><font size="5px">第九天  深入剖析I/O流 </font></center></strong></p>
<h1 id="IO框架"><a href="#IO框架" class="headerlink" title="IO框架"></a>IO框架</h1><p><strong><center><font size="3px" color="#999999">Java IO学习是一件非常艰巨的任务，这挑战来自于其覆盖了所有的技术可能性。</font></center></strong></p>
<p>它不仅存在各种I/O源端还有想要和它通信的接收端（文件/console/网络），而且还需要以不同的方式与它们进行通信（顺序/随机存取/缓冲/二进制/字符/行/字 等等），这些综合起来就需要我们开发人员去大量的学习和知识技能补充。</p>
<p>当然要学会这些Java的I/O是比较难的，因为这其实需要我们去构建一个源于IO的知识体系。要构建这个体系又需要我们深入理解IO库的演进过程。那么接下来就开始学习吧。</p>
<h1 id="IO简介"><a href="#IO简介" class="headerlink" title="IO简介"></a>IO简介</h1><p>数据流是一组有序、有起点和终点的字节的数据序列。包括输入流和输出流。</p>
<p>流序列中的数据既可以是未经加工的原始二进制数据，也可以是经一定编码处理后符合某种格式规定的特定数据。因此Java中的流分为两种：<br><strong>1）字节流：</strong> 数据流中最小的数据单元是字节<br><strong>2）字符流：</strong> 数据流中最小的数据单元是字符</p>
<p>Java.io包中最重要的就是5个类和一个接口。5个类指的是 File、OutputStream、InputStream、Writer、Reader；一个接口指的是 Serializable。</p>
<h2 id="Java-I-O三个层次介绍"><a href="#Java-I-O三个层次介绍" class="headerlink" title="Java I/O三个层次介绍"></a>Java I/O三个层次介绍</h2><ol>
<li>流式部分 — 最主要的部分。如：OutputStream、InputStream、Writer、Reader等</li>
<li>非流式部分 — 如 File类、RandomAccess类和FileDescriptor等类</li>
<li>其他 — 文件读取部分的安全相关的类，如：SerializablePermission类，以及与本地操作系统相关的文件系统的类，如：FileSystem类和Win32FileSystem类和WinNTFileSystem类。</li>
</ol>
<p><img alt="图片.png" data-src="https://i.loli.net/2020/06/21/WpNjG9x3STQiZbY.png" class="lazyload"></p>
<h2 id="IO在Android平台应用及其原理"><a href="#IO在Android平台应用及其原理" class="headerlink" title="IO在Android平台应用及其原理"></a>IO在Android平台应用及其原理</h2><p>在Android平台，从应用的角度出发，我们最需要的关注和研究的就是 字节流（Stream）和 字符流（Reader/Writer）以及 File/RandomAccessFile。在介绍这些流的读取与写入之前，<strong>首先必须掌握的，就是设计模式中的修饰模式</strong>，学会并理解修饰模式是搞懂流的必备前提条件。</p>
<h3 id="设计模式-装饰器模式"><a href="#设计模式-装饰器模式" class="headerlink" title="设计模式 - 装饰器模式"></a>设计模式 - 装饰器模式</h3><h3 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h3><p>从流的整个发展史来看出现的各种类之间的关系，都是沿用了装饰器模式，都是一个类的功能可以用来修饰其他类，然后组合成一个比较复杂的流，比如说：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DataOutputStream out = <span class="keyword">new</span> DataOutputStream(</span><br><span class="line">    <span class="keyword">new</span> BufferedOutputStream(</span><br><span class="line">        <span class="keyword">new</span> FileOutputStream(</span><br><span class="line">            <span class="keyword">new</span> File(file)</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>从上面的代码块中不难看出这些类的关系：<strong>为了向文件中写入数据，首先需要创建一个FileOutputStream，然后为了提升访问的效率，将它发送给具备缓存功能的BufferedOutputStream，而为了实现与机器类型无关的Java基本类型数据的输出，所以，我们将缓存的流传递给了 DateOutputStream。</strong>从上面的关系我们可以看到，其基本目的都是为了OutputStream添加额外的功能。<strong>而这种额外的功能的添加就是采用了装饰模式来构建的代码。</strong></p>
<p>下面的图是一个关于字节流知识体系的图谱，这张图谱比较全面的概况了我们字节流中间的各个类以及它们之间的关系。</p>
<p><img alt="图片.png" data-src="https://i.loli.net/2020/06/21/vJdWlqSE45cu6sF.png" class="lazyload"></p>
<h4 id="字节流功能分类"><a href="#字节流功能分类" class="headerlink" title="字节流功能分类"></a>字节流功能分类</h4><p>首先明确一点，我们按照一个学习路线来学习能很好的理解字节流功能，那为什么要这样做呢？原因是它们的功能决定的。</p>
<p><strong><font color="#ea3323">OutputStream -&gt; FileOutputStream/FilterOutputStream -&gt; DataOutputStream -&gt; BufferedOutputStream</font></strong></p>
<p>相应的学习InputStream方法即可。</p>
<p>这里必须强调：所有的写入写出，其参考的对象都是内存，从内存写入文件，从文件读取到内存，这一点搞清楚，才能理解输入输出的奥义。</p>
<h5 id="FilterOutputStream"><a href="#FilterOutputStream" class="headerlink" title="FilterOutputStream"></a>FilterOutputStream</h5><p>从学习的角度来，我们首先应该掌握FilterOutputStream，以及FileOutputStream，这两个类是基本的类，从继承关系来看，不难发现它们都是对abstract类OutputStream的拓展，都是它的子类。然而，伴随着对Stream流的功能的拓展，所以后面出现了 DataOutputStream（将Java中的基础数据类型写入数据字节输出流中，并保存在存储介质中，然后可以用DataOutputstream从存储介质中读取到程序中还原成Java基础类型）。通过使用装饰器模式，使得避免了类的爆炸式增长。</p>
<h5 id="BufferedOutputStream"><a href="#BufferedOutputStream" class="headerlink" title="BufferedOutputStream"></a>BufferedOutputStream</h5><p>为了提升Stream的执行效率，所以出现了BufferedOutputStream。BufferedOutputStream实质上是本地添加了混存的数组。在使用BufferedOutputStream之前每次从磁盘读入数据的时候都是需要访问多少byte数据就向磁盘中读多少个byte的数据，而出现BufferedOutputStream之后，策略就改了，会先读取整个缓存空间相应大小的数据，这样就是从磁盘读取了一块比较大的数据，然后缓存起来，从而减少了对磁盘的访问次数以达到提升性能的目的。</p>
<p>另外一方面，我们知道了OutputStream（输出流）的发展历史后，便可以知道如何使用OutputStream了，同样的方法，也可以运用到InputStream中来。</p>
<h3 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h3><p>下面是一个关于字符流的知识图谱，这张图谱比较全面的概况了我们字符流中间的各个类以及它们之间的关系。</p>
<p><img alt="图片.png" data-src="https://i.loli.net/2020/06/21/rtsD15XuqYjxQlU.png" class="lazyload"></p>
<p>字符流和和字节流同样，只是，字节流面向的是我们位置或者即使知道它们的编码格式也意义不大的文件（png、exe、zip）的时候采用字节，而面对一些我们知道的文件构造，我们就能够搞懂它意义的文件（json、xml）等文件的时候我们还是需要以字符的形式来读取，所以就出现了字符流。Reader和Stream最大的区别应该是前者包含了一个 readLine()接口，这个接口就表明，这是一行数据的意义，这也是可以理解的，因为只有字符才具备行的概念，相反字节流中的行也就是一个字节符号而已。</p>
<h4 id="字符流功能分类"><a href="#字符流功能分类" class="headerlink" title="字符流功能分类"></a>字符流功能分类</h4><p><strong><font color="#ea3323">Writer -&gt; Filter&lt; -&gt; BufferedWriter -&gt; OutputStreamWriter -&gt; FileWriter -&gt; 其他</font></strong></p>
<h5 id="FilterWriter-FilterReader"><a href="#FilterWriter-FilterReader" class="headerlink" title="FilterWriter/FilterReader"></a>FilterWriter/FilterReader</h5><p>字符过滤输出流与FilterOutputStream功能一样，只是简单重写了父类的方法，目的是为了所有装饰类提供标准和基本的方法，要求子类必须实现核心方法，和拥有自己的专属功能。这里的FilterWriter没有子类，大概其意义只是为了提供一个接口，留待日后拓展，当然其本身也是一个抽象类。</p>
<h5 id="BufferedWriter-BufferedReader"><a href="#BufferedWriter-BufferedReader" class="headerlink" title="BufferedWriter/BufferedReader"></a>BufferedWriter/BufferedReader</h5><p>BufferedWriter是Writer类的一个子类。它的功能是为传入的底层字符输出提供缓存功能。同样当使用底层字符输出流向目的地写入字符或者字符数组时，每写入一次就要打开一次与目的地的连接，这样频繁的访问不断降低写入写出效率，也有可能导致对存储介质造成一定的破坏。比如，当我们向磁盘中不断的写入字节时，夸张情况下，将一个非常大的单位（eg. GB）的字节数据写入到磁盘的指定文件中，每写入一个字节就要打开一次这个磁盘的通道，这个结果无疑是恐怖的，而当我们使用BufferedWriter将底层字符输出流，比如FileReader包装一下之后，我们便可以在程序中，将要写入到文件中的字符先写入到BufferedWriter的内置缓存中，然后当达到一定数量时，一次性写入FileReader流中，此时FileReader就可以打开一个通道，将这个数据块写入到文件中，这样做虽然不可能达到一次访问就将所有数据写入磁盘中的效果，但也大大的提高了效率和减少了磁盘的访问量。</p>
<h5 id="OutputStreamWriter-InputStreamReader"><a href="#OutputStreamWriter-InputStreamReader" class="headerlink" title="OutputStreamWriter/InputStreamReader"></a>OutputStreamWriter/InputStreamReader</h5><p>输入字符转换流，是输入字节流转向输入字符流字符流的桥梁。用于将输入字节流转换成输入字符流，通过指定的或者默认的编码将从底层读取的字节转换成字符返回到程序中，这与OutputStreamWriter一样，本质也是使用其内部的一个类来完成所有的工作：<br>StreamDecoder - 使用默认或者指定的编码将字节转换成字符；<br>OutputStreamWriter/InputStreamReader只是对StreamDecoder进行了一层封装，其内部所有方法核心都是调用StreamDecoder来完成的；</p>
<blockquote>
<p>OutputStreamWriter、InputStreamReader分别为InputStream、OutputStream的低级输入输出流提供将字节转换成字符的桥梁，它们只是一层装饰而已，其真正的核心为：</p>
</blockquote>
<p>OutputStreamWriter中的StreamEncoder：</p>
<blockquote>
<ol>
<li>使用指定的或者默认的编码集将字符转码为字节；</li>
<li>调用StreamEncoder自身实现的写入方法将转码后的字节写入到底层字节输出流中。</li>
</ol>
</blockquote>
<p>InputStreamReader中的StreamDecoder：</p>
<blockquote>
<ol>
<li>使用指定的或者默认的编码集将字节转码为字符；</li>
<li>调用StreamDecoder自身实现的读取方法将解码后的字符读取到程序中。</li>
</ol>
</blockquote>
<p>在理解这两个流的时候需要注意：</p>
<p>java.io中只有将字节转换成字符的类，并没有将字符转换成字节的类。原因很简单：字符流的存在本来就是为了对字节流进行装饰、加工处理以便更方便的去使用。<br>在使用这两个流的时候需要注意：由于这两个流要频繁对读取或者写入的字节或者字符进行转码、解码、以及与底层流的源和目的地进行交互，所以使用的时候使用BufferedWriter、BufferedReader进行包装，以达到最高效率和保护存储介质。</p>
<h5 id="FileReader-FileWriter"><a href="#FileReader-FileWriter" class="headerlink" title="FileReader/FileWriter"></a>FileReader/FileWriter</h5><p>FileReader和FileWriter继承于InputStreamReader/OutputStreamWriter。从源码可以看出：</p>
<p>FileWriter文件字符输出流，主要用于将字符写入到指定的打开的文件中，其本质是通过传入的文件名、文件、或者文件描述符来创建FileOutputStream，然后使用OutputStreamWriter使用默认编码将FileOutputStream转换成Writer（这个Writer就是FileWriter）。如果考虑使用FileWriter类的话，最好搭配使用BufferedWriter包装一下，效果会很好。</p>
<p>FileReader文件字符输入流，主要用于将文件内容以字符形式读取出来，一般用于读取字符形式的文件内容，也可以读取字节形式，但是因为FileReader内部也是通过传入的参数构造InputStreamReader，并且只能使用默认编码，所以由于其无法控制编码问题，就会导致容易出现乱码。所以在读取字节形式的文件时还是使用字节流来操作会好一点，同样在使用此流的时候用BufferedReader包装一下，也能就此提高读取效率，保护存储介质。</p>
<h3 id="字节流与字符流"><a href="#字节流与字符流" class="headerlink" title="字节流与字符流"></a>字节流与字符流</h3><p>那么字节输入流和字符输入流之间的关系是怎样的呢？详见下图：</p>
<p><img alt="图片.png" data-src="https://i.loli.net/2020/06/21/HDWwMdFZcgkEqIj.png" class="lazyload"></p>
<p>同样的，字节输出流和字符输出流的关系也有：</p>
<p><img alt="图片.png" data-src="https://i.loli.net/2020/06/21/Bpwh9r3NJvSaL7D.png" class="lazyload"></p>
<h4 id="两者区别"><a href="#两者区别" class="headerlink" title="两者区别"></a>两者区别</h4><p>字节流和字符流的在使用上两者很相似，那么它们的区别在哪？</p>
<blockquote>
<p>字节流在操作的时候本身是不会用到缓冲区（内存）的，是与文件本身直接操作有关的，而字符流在操作的时候是使用到缓冲区的；字节流在操作文件时，即使不关闭资源（close方法），文件也能输出，但是如果字符流不使用close方法的话，则不会输出任何内容。说明字符流用的是缓冲区，并且可以使用flush方法强制进行刷新缓冲区，这样操作之后才能在不close的情况下输出内容。</p>
</blockquote>
<p>那么问题来了，在开发过程中，究竟是使用字节流好还是字符流好呢？</p>
<p>在所有的硬盘上保存文件或者进行传输的时候都是以字节的方法进行的，包括图片也是按字节完成的。而字符是只有在内存中才会形成，所以使用字节的操作是最多的。</p>
<p>如果Java程序实现一个拷贝功能，则应该选用字节流进行操作（可能拷贝图片），并且采用边读边写的方式（节省内存）。</p>
<h4 id="两者转换"><a href="#两者转换" class="headerlink" title="两者转换"></a>两者转换</h4><p>虽然Java支持字节流和字符流，但有时需要在字节流和字符流两者之间做转换。InputStreamReader 和 OutputStreamWriter，这两个类就是作为字节流和字符流之间相互转换的类。</p>
<font color="grey" size="3px">InputStreamReader用于将一个字节流中的字节解码成字符：</font>

<p><strong>有两个构造方法：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">InputStreamReader(InputStream in);</span><br></pre></td></tr></table></figure>
<p><strong>功能：</strong> 用默认字符集创建一个InputStreamReader对象</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">InputStreamReader(InputStream in, String CharsetName);</span><br></pre></td></tr></table></figure>
<p><strong>功能：</strong> 接收已指定字符集名的字符串，并用该字符创建对象</p>
<font color="grey" size="3px">OutputStream用于将写入的字符编码成字节后写入一个字节流：</font>

<p><strong>同样有两个构造方法：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">OutputStreamWriter(OutputStream out);</span><br></pre></td></tr></table></figure>
<p><strong>功能：</strong> 用默认字符集创建一个OutputStreamWriter对象；</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">OutputStreamWriter(OutputStream out, String CharsetName);</span><br></pre></td></tr></table></figure>
<p><strong>功能：</strong> 接收已指定字符集名的字符串，并用该字符创建OutputStreamWriter对象</p>
<p>为了避免频繁的转换字节流和字符流，对以上两个类进行了封装：</p>
<p>BufferedWriter类封装了OutputStreamWriter类；<br>BufferedReader类封装了InputStreamReader类；</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">BufferedWriter out = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(System.out));</span><br><span class="line">BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br></pre></td></tr></table></figure>
<p>利用下面的语句，可以从控制台读取一行字符串：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">String line = in.readLine();</span><br></pre></td></tr></table></figure></div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java%E8%BF%9B%E9%98%B6/">Java进阶    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/benjamin-elliott-LYdXESrw4dY-unsplash.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/img/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/01/%E9%87%8D%E6%8B%BEAndroid-Java%E8%BF%9B%E9%98%B6%E4%B9%8BRxJava%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/宇宙特辑/图片20.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>重拾Android-Java进阶之RxJava编程原理</span></div></a></div><div class="next-post pull_right"><a href="/2020/05/30/%E9%87%8D%E6%8B%BEAndroid-Java%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%BA%8F%E5%88%97%E5%8C%96/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/cover/sean-lim-NPlv2pkYoUA-unsplash.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>重拾Android-Java进阶之序列化</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/06/01/重拾Android-Java进阶之RxJava编程原理/" title="重拾Android-Java进阶之RxJava编程原理"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/宇宙特辑/图片20.jpg"><div class="relatedPosts_title">重拾Android-Java进阶之RxJava编程原理</div></a></div><div class="relatedPosts_item"><a href="/2020/05/30/重拾Android-Java进阶之序列化/" title="重拾Android-Java进阶之序列化"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/cover/sean-lim-NPlv2pkYoUA-unsplash.jpg"><div class="relatedPosts_title">重拾Android-Java进阶之序列化</div></a></div><div class="relatedPosts_item"><a href="/2020/05/29/重拾Android-Java进阶之深入理解ClassLoader类加载/" title="重拾Android-Java进阶之深入理解ClassLoader类加载"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/uploadbeta2.com.jpeg"><div class="relatedPosts_title">重拾Android-Java进阶之深入理解ClassLoader类加载</div></a></div><div class="relatedPosts_item"><a href="/2020/05/28/重拾Android-Java进阶之深入理解JVM/" title="重拾Android-Java进阶之深入理解JVM"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/photo-1589371709918-9dfa8c55338e.jpg"><div class="relatedPosts_title">重拾Android-Java进阶之深入理解JVM</div></a></div><div class="relatedPosts_item"><a href="/2020/05/27/重拾Android-Java进阶之深入理解GC机制/" title="重拾Android-Java进阶之深入理解GC机制"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/uploadbeta3.com.jpeg"><div class="relatedPosts_title">重拾Android-Java进阶之深入理解GC机制</div></a></div><div class="relatedPosts_item"><a href="/2020/05/26/重拾Android-Java进阶之线程池原理与AsyncTask/" title="重拾Android-Java进阶之线程池原理与AsyncTask"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/1L0ne8.jpg"><div class="relatedPosts_title">重拾Android-Java进阶之线程池原理与AsyncTask</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="lv-container" data-id="city" data-uid="MTAyMC80NzU5OC8yNDA5OA=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div></div><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/benjamin-elliott-LYdXESrw4dY-unsplash.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2020 By Leo·Cheung</div><div class="footer_custom_text">Some of life, you have to go to the great challanges. - By Kobe Bryant</div><div class="icp"><a href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span>浙ICP备19024714号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script async src="/js/search/algolia.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/dist/APlayer.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/dist/APlayer.min.js"></script><div class="aplayer" id="player"><script>$(function() {
    $.ajax({
        url: "https://api.i-meto.com/meting/api?server=netease&type=playlist&id=416198729",
        success: function(e) {
            var aplayerList = new APlayer({
            element: document.getElementById('player'),
            narrow: false,
            autoplay: true,
            showlrc: false,
            mutex: true,
            theme: '#FFF0',
            mode: 'random',
            preload: 'metadata',
            fixed:true,
            listmaxheight: '200px',
            music:JSON.parse(e)
            });
            window.aplayers || (window.aplayers = []),
            window.aplayers.push(aplayerList)
        }
    })
    //change aplayer style
    var aplayer  = document.getElementById('player');
    aplayer.style.boxShadow = 'none';
    aplayer.style.marginTop = '10px';
    $('.aplayer-list-light').css('background','#d8e2eb69');
})</script></div></body></html>