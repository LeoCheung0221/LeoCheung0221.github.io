<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>高级Android-【C/C++理论实战技术】C C++基础篇 | ONE·PIECE</title><meta name="description" content="高级Android-【C/C++理论实战技术】C C++基础篇"><meta name="keywords" content="C/C++技术"><meta name="author" content="Leo·Cheung,leocheung4ever@gmail.com"><meta name="copyright" content="Leo·Cheung"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="google-site-verification" content="DOzi6zRsQ2GdSxTA0T1-9Ul8fB_XbMM43baLPg1CuOo"><meta name="baidu-site-verification" content="S7HPSRHOBw"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="高级Android-【C/C++理论实战技术】C C++基础篇"><meta name="twitter:description" content="高级Android-【C/C++理论实战技术】C C++基础篇"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/376.jpg"><meta property="og:type" content="article"><meta property="og:title" content="高级Android-【C/C++理论实战技术】C C++基础篇"><meta property="og:url" content="http://tufusi.com/2020/08/30/%E9%AB%98%E7%BA%A7Android-%E3%80%90C%20C++%E7%90%86%E8%AE%BA%E5%AE%9E%E6%88%98%E6%8A%80%E6%9C%AF%E3%80%91C%20C++%E5%9F%BA%E7%A1%80%E7%AF%87/"><meta property="og:site_name" content="ONE·PIECE"><meta property="og:description" content="高级Android-【C/C++理论实战技术】C C++基础篇"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/376.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v4.7.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.css"><link rel="canonical" href="http://tufusi.com/2020/08/30/%E9%AB%98%E7%BA%A7Android-%E3%80%90C%20C++%E7%90%86%E8%AE%BA%E5%AE%9E%E6%88%98%E6%8A%80%E6%9C%AF%E3%80%91C%20C++%E5%9F%BA%E7%A1%80%E7%AF%87/"><link rel="prev" title="高级Android-【C/C++理论实战技术】BAT最常用的C技术" href="http://tufusi.com/2020/08/30/%E9%AB%98%E7%BA%A7Android-%E3%80%90C%20C++%E7%90%86%E8%AE%BA%E5%AE%9E%E6%88%98%E6%8A%80%E6%9C%AF%E3%80%91BAT%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84C%E6%8A%80%E6%9C%AF/"><link rel="next" title="重拾Android-【吃透源码系列】之Android系统启动（四）属性服务" href="http://tufusi.com/2020/08/29/%E9%87%8D%E6%8B%BEAndroid-%E3%80%90%E5%90%83%E9%80%8F%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97%E3%80%91%E4%B9%8BAndroid%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%EF%BC%88%E5%9B%9B%EF%BC%89%E5%B1%9E%E6%80%A7%E6%9C%8D%E5%8A%A1/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"RG8HX7QXWX","apiKey":"a183cbbffa921b0dddc2872cfd1abd86","indexName":"WEBSITE001","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://tufusi.com/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: {"text":"富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善","fontSize":"15px"},
  medium_zoom: 'true',
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"}
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">ONE·PIECE</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/android/"><i class="fa-fw fa fa-android"></i><span> 重拾Android</span></a></div><div class="menus_item"><a class="site-page" href="/leetcode/"><i class="fa-fw fa fa-diamond"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page" href="/news/"><i class="fa-fw fa fa-newspaper-o"></i><span> AI头条</span></a></div><div class="menus_item"><a class="site-page" href="/papers/"><i class="fa-fw fa fa-paper-plane-o"></i><span> 论文推荐</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-battery-half" aria-hidden="true"></i><span> 充电驿站</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/e-books/"><i class="fa-fw fa fa-book"></i><span> 小书屋</span></a></li><li><a class="site-page" href="/e-movies/"><i class="fa-fw fa fa-film"></i><span> 大影单</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="http://tufusi.com/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">209</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">70</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">8</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/android/"><i class="fa-fw fa fa-android"></i><span> 重拾Android</span></a></div><div class="menus_item"><a class="site-page" href="/leetcode/"><i class="fa-fw fa fa-diamond"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page" href="/news/"><i class="fa-fw fa fa-newspaper-o"></i><span> AI头条</span></a></div><div class="menus_item"><a class="site-page" href="/papers/"><i class="fa-fw fa fa-paper-plane-o"></i><span> 论文推荐</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-battery-half" aria-hidden="true"></i><span> 充电驿站</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/e-books/"><i class="fa-fw fa fa-book"></i><span> 小书屋</span></a></li><li><a class="site-page" href="/e-movies/"><i class="fa-fw fa fa-film"></i><span> 大影单</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#基础"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">基础</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#函数"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Linux-内存布局原理"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">Linux 内存布局原理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#内存"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">内存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#内存单位"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">内存单位</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#内存编址"><span class="toc_mobile_items-number">1.2.3.</span> <span class="toc_mobile_items-text">内存编址</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#内存地址"><span class="toc_mobile_items-number">1.2.4.</span> <span class="toc_mobile_items-text">内存地址</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#内存组成"><span class="toc_mobile_items-number">1.2.5.</span> <span class="toc_mobile_items-text">内存组成</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Android-内存组成"><span class="toc_mobile_items-number">1.2.5.1.</span> <span class="toc_mobile_items-text">Android 内存组成</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#C-语言内存组成"><span class="toc_mobile_items-number">1.2.5.2.</span> <span class="toc_mobile_items-text">C 语言内存组成</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#共用体"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">共用体</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#结构体"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">结构体</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#内存对齐"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">内存对齐</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#结构体大小"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">结构体大小</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#结构体存储原则"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">结构体存储原则</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#so-动态库与编译"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">so 动态库与编译</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#库的概念"><span class="toc_mobile_items-number">1.8.1.</span> <span class="toc_mobile_items-text">库的概念</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#库存在的意义"><span class="toc_mobile_items-number">1.8.2.</span> <span class="toc_mobile_items-text">库存在的意义</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#库的种类"><span class="toc_mobile_items-number">1.8.3.</span> <span class="toc_mobile_items-text">库的种类</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#动态库与静态库的区别"><span class="toc_mobile_items-number">1.8.4.</span> <span class="toc_mobile_items-text">动态库与静态库的区别</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#基础进阶"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">基础进阶</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#类型转换"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">类型转换</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#const-cast"><span class="toc_mobile_items-number">2.1.1.</span> <span class="toc_mobile_items-text">const_cast</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#static-cast"><span class="toc_mobile_items-number">2.1.2.</span> <span class="toc_mobile_items-text">static_cast</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#dynamic-cast"><span class="toc_mobile_items-number">2.1.3.</span> <span class="toc_mobile_items-text">dynamic_cast</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#reinterpret-cast"><span class="toc_mobile_items-number">2.1.4.</span> <span class="toc_mobile_items-text">reinterpret_cast</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#char-与int转换"><span class="toc_mobile_items-number">2.1.5.</span> <span class="toc_mobile_items-text">char*与int转换</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#异常"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">异常</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#文件与流操作"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">文件与流操作</span></a></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#基础"><span class="toc-number">1.</span> <span class="toc-text">基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数"><span class="toc-number">1.1.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-内存布局原理"><span class="toc-number">1.2.</span> <span class="toc-text">Linux 内存布局原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内存"><span class="toc-number">1.2.1.</span> <span class="toc-text">内存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内存单位"><span class="toc-number">1.2.2.</span> <span class="toc-text">内存单位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内存编址"><span class="toc-number">1.2.3.</span> <span class="toc-text">内存编址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内存地址"><span class="toc-number">1.2.4.</span> <span class="toc-text">内存地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内存组成"><span class="toc-number">1.2.5.</span> <span class="toc-text">内存组成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Android-内存组成"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">Android 内存组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-语言内存组成"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">C 语言内存组成</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#共用体"><span class="toc-number">1.3.</span> <span class="toc-text">共用体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体"><span class="toc-number">1.4.</span> <span class="toc-text">结构体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内存对齐"><span class="toc-number">1.5.</span> <span class="toc-text">内存对齐</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体大小"><span class="toc-number">1.6.</span> <span class="toc-text">结构体大小</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体存储原则"><span class="toc-number">1.7.</span> <span class="toc-text">结构体存储原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#so-动态库与编译"><span class="toc-number">1.8.</span> <span class="toc-text">so 动态库与编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#库的概念"><span class="toc-number">1.8.1.</span> <span class="toc-text">库的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#库存在的意义"><span class="toc-number">1.8.2.</span> <span class="toc-text">库存在的意义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#库的种类"><span class="toc-number">1.8.3.</span> <span class="toc-text">库的种类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态库与静态库的区别"><span class="toc-number">1.8.4.</span> <span class="toc-text">动态库与静态库的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#基础进阶"><span class="toc-number">2.</span> <span class="toc-text">基础进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#类型转换"><span class="toc-number">2.1.</span> <span class="toc-text">类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#const-cast"><span class="toc-number">2.1.1.</span> <span class="toc-text">const_cast</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#static-cast"><span class="toc-number">2.1.2.</span> <span class="toc-text">static_cast</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamic-cast"><span class="toc-number">2.1.3.</span> <span class="toc-text">dynamic_cast</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reinterpret-cast"><span class="toc-number">2.1.4.</span> <span class="toc-text">reinterpret_cast</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#char-与int转换"><span class="toc-number">2.1.5.</span> <span class="toc-text">char*与int转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#异常"><span class="toc-number">2.2.</span> <span class="toc-text">异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件与流操作"><span class="toc-number">2.3.</span> <span class="toc-text">文件与流操作</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/376.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">高级Android-【C/C++理论实战技术】C C++基础篇</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-08-30<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-09-13</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Android/">Android</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>字数总计: </span><span class="word-count">3k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>阅读时长: 10 分钟</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p><strong>函数定义：</strong> 函数是一组一起执行一个任务的语句。每个 C 程序都至少有一个函数，即主函数 main()，所有简单的程序都可以定义其他额外的函数。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">return_type <span class="title">function_name</span><span class="params">(parameter <span class="built_in">list</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">// body of the dunction</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>指针函数：</strong> 指带指针的函数，即本质是一个函数。函数返回类型是某一类型的指针。</p>
<p>如：<font color="#ea3323"><b>类型标识符* 函数名(参数表)</b></font></p>
<font color="#ea3323"><b>int* func(x, y)</b></font>

<p><strong>函数指针：</strong> 是指向函数的指针变量，即本质是一个指针变量。</p>
<p>如：<font color="#ea3323"><b>int (*f)(int x); /* 声明一个函数指针 */</b></font></p>
<font color="#ea3323"><b>func; /\* 将func函数的首地址赋给指针f \*/</b></font>

<p><strong>指针函数 和 函数指针 最大的区别在于：</strong> 后者是一个变量的声明，只是这个变量是一个方法体；而前者则是一个指针。</p>
<h2 id="Linux-内存布局原理"><a href="#Linux-内存布局原理" class="headerlink" title="Linux 内存布局原理"></a>Linux 内存布局原理</h2><h3 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h3><p><strong>硬件角度：</strong> 内存是计算机必不可少的一个组成部分，是与 CPU 沟通的桥梁，计算机中所有的程序都是运行在内存中的。</p>
<p><strong>逻辑角度：</strong> 内存是一块具备随机访问能力，支持读写操作，用来存放程序及程序运行中产生数据的区域。</p>
<h3 id="内存单位"><a href="#内存单位" class="headerlink" title="内存单位"></a>内存单位</h3><p>每一块内存都是有大小的，其衡量单位为：</p>
<ul>
<li><p>位（bit）：电子计算机中最小的单位，每一位的状态只能是0或者1。</p>
</li>
<li><p>字节（Byte）: 1Byte = 8bit，是内存基本的计量单位。</p>
</li>
<li><p>KB：1KB = 1024Byte，也就是1024个字节。</p>
</li>
<li><p>MB：1MB = 1024KB，当然更大的还有 GB、TB。</p>
</li>
</ul>
<h3 id="内存编址"><a href="#内存编址" class="headerlink" title="内存编址"></a>内存编址</h3><p>计算机中的内存按字节编址，每个地址的存储单元可以存放一个字节（8个bit）的数据，CPU 通过内存地址获取指令和数据，并不关心这个地址所代表的空间具体在什么位置、怎么分布，因为硬件的设计保证一个地址对应着一个固定的空间，所以说：内存地址和地址指向的空间共同构成了一个内存单元。</p>
<h3 id="内存地址"><a href="#内存地址" class="headerlink" title="内存地址"></a>内存地址</h3><p>通常用16进制的数据表示，指向内存中某一块区域。</p>
<p><strong>内存分配规则：</strong> 内存分配规则是连续的，一个挨着一个。</p>
<p><img alt="内存地址分配规则.png" data-src="https://i.loli.net/2020/09/11/eLnCYH8fTdqasFX.png" class="lazyload"></p>
<p><strong>内存对象 Vs 内存地址</strong> </p>
<p>指针指向的内存区域能存储不同的类型。</p>
<p><strong>基本数据类型</strong></p>
<p><img alt="基本数据类型.png" data-src="https://i.loli.net/2020/09/11/Y6aCOM7lJeimS3t.png" class="lazyload"></p>
<h3 id="内存组成"><a href="#内存组成" class="headerlink" title="内存组成"></a>内存组成</h3><h4 id="Android-内存组成"><a href="#Android-内存组成" class="headerlink" title="Android 内存组成"></a>Android 内存组成</h4><p><img alt="Android内存组成.png" data-src="https://i.loli.net/2020/09/11/jfrL5I9VCNmURhP.png" class="lazyload"></p>
<h4 id="C-语言内存组成"><a href="#C-语言内存组成" class="headerlink" title="C 语言内存组成"></a>C 语言内存组成</h4><p><img alt="C内存组成.png" data-src="https://i.loli.net/2020/09/11/nj2PFcokYbZx91W.png" class="lazyload"></p>
<h2 id="共用体"><a href="#共用体" class="headerlink" title="共用体"></a>共用体</h2><p><strong>定义：</strong> 共用体是一种特殊的数据类型，允许在相同的内存位置存储不同的数据类型。并且可以定义一个带有多成员的共用体，但是任何时候只能有一个成员带有值。共用体提供了一种使用相同的内存位置的有效方式。</p>
<p>语法规则如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">union</span> Data </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">float</span> j;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">20</span>];</span><br><span class="line">&#125;data;</span><br></pre></td></tr></table></figure>
<p><strong>【注意】</strong> 共用体占用的内存应足够存储共用体中最大的成员。例如，上述示例，Data将占用20个字节的内存空间，因为在各个成员中，字符串所占用的空间是最大的。</p>
<h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><p>类似于 Java 中的的 JavaBean，和共同体一样，都是一种数据类型的集合，但是结构体需要更大的内存开销。</p>
<p>语法规则如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Student 相当于类名</span></span><br><span class="line"><span class="comment">// student 和 a 可以不定义，表示结构变量，也就是 Student 类型的变量</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;student,a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 typedef 定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;Student;</span><br></pre></td></tr></table></figure>
<h2 id="内存对齐"><a href="#内存对齐" class="headerlink" title="内存对齐"></a>内存对齐</h2><p>在 C 执行的过程中，特别是给对象、结构体分配内存的时候，是遵循内存对齐规则的。</p>
<p><strong>定义：</strong> 对齐跟数据在内存中的位置有关。如果一个变量的内存地址正好位于它长度的整数倍，他就被称作自然对齐。比如在32位CPU下，假设一个整型变量的地址为 0x00000004，那他就是自然对齐的。</p>
<h2 id="结构体大小"><a href="#结构体大小" class="headerlink" title="结构体大小"></a>结构体大小</h2><p><strong>定义：</strong> 当结构体需要内存过大，使用动态内存申请。结构体占用字节数和结构体内字段无关，指针占用内存就是4/8字节，因此传指针比传值效率更高。</p>
<h2 id="结构体存储原则"><a href="#结构体存储原则" class="headerlink" title="结构体存储原则"></a>结构体存储原则</h2><ul>
<li><p>（1）结构体变量中成员的偏移量必须是成员大小的整数倍（0是被认为是任何数的整数倍）</p>
</li>
<li><p>（2）结构体大小必须是所有成员大小的整数倍，也即所有成员大小的公倍数。</p>
</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Student 相当于类名</span></span><br><span class="line"><span class="comment">// student 和 a 可以不定义，表示结构变量，也就是 Student 类型的变量</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></span><br><span class="line">    <span class="comment">// 占一个字节</span></span><br><span class="line">    <span class="keyword">char</span> c1; </span><br><span class="line">    <span class="comment">// 占四个字节</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="comment">// 占一个字节</span></span><br><span class="line">    <span class="keyword">char</span> c2;</span><br><span class="line">&#125;student,a;</span><br></pre></td></tr></table></figure>
<p>按常理来说内存会占据 6个字节，但是使用内存对齐后就会占据 12 个字节。</p>
<p><strong>为什么？</strong></p>
<p>因为在32位操作系统（虽然64位操作系统，但是为了保证兼容性，编程仍然只考虑32位）中，数据总线是32位，地址总线是32位。</p>
<p>地址总线是32位，意味着寻址空间是按4步长递增的；同时数据总线32位意味着一次可读写4byte。</p>
<p>图分析如下：</p>
<p>左图：同样一个int类型变量，要通过两次寻址才可以访问完全，但是右图不会</p>
<p><img alt="结构体内存对齐.png" data-src="https://i.loli.net/2020/09/12/FTlB4jUcqRdWwyS.png" class="lazyload"></p>
<h2 id="so-动态库与编译"><a href="#so-动态库与编译" class="headerlink" title="so 动态库与编译"></a>so 动态库与编译</h2><h3 id="库的概念"><a href="#库的概念" class="headerlink" title="库的概念"></a>库的概念</h3><p><strong>定义：</strong> 在 windows 平台和 Linux 平台下都大量存在着库。Android 中也存在库，顾名思义，库就是指一个容器文件，里面装载的就是函数。由于 windows 和 Linux 的平台不同（主要是编译器、汇编器以及连接器的不同），因此二者库的二进制是不兼容的。</p>
<h3 id="库存在的意义"><a href="#库存在的意义" class="headerlink" title="库存在的意义"></a>库存在的意义</h3><p><strong>定义：</strong> 库是别人写好的现有的，成熟的，可以复用的代码。现实中每个程序都需要依赖很多基础的底层库，不可能每个人的代码都从零开始，因此库的存在意义非同寻常。</p>
<h3 id="库的种类"><a href="#库的种类" class="headerlink" title="库的种类"></a>库的种类</h3><p>分为<strong>动态库</strong>和<strong>静态库</strong>，在windows下，动态库的文件格式是 .dll，而静态库则是 .lib，在 Linux 下 动态库的文件格式则是 .so，静态库是 .a</p>
<p>那么如何编译动态库？如下图所示：</p>
<p><img alt="如何编译动态库.png" data-src="https://i.loli.net/2020/09/12/LS5XiUZFMzewgR6.png" class="lazyload"></p>
<p>动态库编译需要 gcc 因此Android开发需要 NDK</p>
<p>编译 .so 命令：gcc test.c -fPIC -shared/static -o test.so</p>
<h3 id="动态库与静态库的区别"><a href="#动态库与静态库的区别" class="headerlink" title="动态库与静态库的区别"></a>动态库与静态库的区别</h3><ul>
<li><p>静态库文件比较大，动态库一般都比较小；</p>
</li>
<li><p>静态库需要在编译时 被链接在目标代码中，动态库则是在运行时才会被加载到目标代码；</p>
</li>
<li><p>静态库类似于 Android 中的 Module，一旦打包APK则需要重新进行编译；</p>
</li>
<li><p>动态库类似于 jar 包，打包是不需要重新进行编译的。</p>
</li>
</ul>
<h1 id="基础进阶"><a href="#基础进阶" class="headerlink" title="基础进阶"></a>基础进阶</h1><h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><blockquote>
<p>除了能使用c语言的强制类型转换外,还有：转换操作符 （新式转换）</p>
</blockquote>
<h3 id="const-cast"><a href="#const-cast" class="headerlink" title="const_cast"></a>const_cast</h3><blockquote>
<p>修改类型的const或volatile属性 </p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *a;</span><br><span class="line"><span class="keyword">char</span> *b = <span class="keyword">const_cast</span>&lt;<span class="keyword">char</span>*&gt;(a);</span><br><span class="line">	</span><br><span class="line"><span class="keyword">char</span> *a;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *b = <span class="keyword">const_cast</span>&lt;<span class="keyword">const</span> <span class="keyword">char</span>*&gt;(a);</span><br></pre></td></tr></table></figure>
<h3 id="static-cast"><a href="#static-cast" class="headerlink" title="static_cast"></a>static_cast</h3><blockquote>
<ol>
<li>基础类型之间互转。如：float转成int、int转成unsigned int等</li>
<li>指针与void之间互转。如：float*转成void*、Bean*转成void*、函数指针转成void*等</li>
<li>子类指针/引用与 父类指针/引用 转换。</li>
</ol>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"p"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> :</span><span class="keyword">public</span> Parent&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	 <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"c"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">Parent  *p = <span class="keyword">new</span> Parent;</span><br><span class="line">Child  *c = <span class="keyword">static_cast</span>&lt;Child*&gt;(p);</span><br><span class="line"><span class="comment">//输出c</span></span><br><span class="line">c-&gt;test();</span><br><span class="line"></span><br><span class="line"><span class="comment">//Parent test加上 virtual 输出 p</span></span><br></pre></td></tr></table></figure>
<h3 id="dynamic-cast"><a href="#dynamic-cast" class="headerlink" title="dynamic_cast"></a>dynamic_cast</h3><blockquote>
<p>主要 将基类指针、引用 安全地转为派生类.</p>
<p>在运行期对可疑的转型操作进行安全检查，仅对多态有效</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//基类至少有一个虚函数</span></span><br><span class="line"><span class="comment">//对指针转换失败的得到NULL，对引用失败  抛出bad_cast异常 </span></span><br><span class="line">Parent  *p = <span class="keyword">new</span> Parent;</span><br><span class="line">Child  *c = <span class="keyword">dynamic_cast</span>&lt;Child*&gt;(p);</span><br><span class="line"><span class="keyword">if</span> (!c) &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"转换失败"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Parent  *p = <span class="keyword">new</span> Child;</span><br><span class="line">Child  *c = <span class="keyword">dynamic_cast</span>&lt;Child*&gt;(p);</span><br><span class="line"><span class="keyword">if</span> (c) &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"转换成功"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="reinterpret-cast"><a href="#reinterpret-cast" class="headerlink" title="reinterpret_cast"></a>reinterpret_cast</h3><blockquote>
<p>对指针、引用进行原始转换</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">float</span> i = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&amp;i float指针，指向一个地址，转换为int类型，j就是这个地址</span></span><br><span class="line"><span class="keyword">int</span> j = <span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">int</span>&gt;(&amp;i);</span><br><span class="line"><span class="built_in">cout</span>  &lt;&lt; hex &lt;&lt; &amp;i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>  &lt;&lt; hex  &lt;&lt; j &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;hex&lt;&lt;i&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//输出十六进制数</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;oct&lt;&lt;i&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//输出八进制数</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dec&lt;&lt;i&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//输出十进制数</span></span><br></pre></td></tr></table></figure>
<h3 id="char-与int转换"><a href="#char-与int转换" class="headerlink" title="char*与int转换"></a>char*与int转换</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//char* 转int float</span></span><br><span class="line"><span class="keyword">int</span> i = atoi(<span class="string">"1"</span>);</span><br><span class="line"><span class="keyword">float</span> f = atof(<span class="string">"1.1f"</span>);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; f &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	</span><br><span class="line"><span class="comment">//int 转 char*</span></span><br><span class="line"><span class="keyword">char</span> c[<span class="number">10</span>];</span><br><span class="line"><span class="comment">//10进制</span></span><br><span class="line">itoa(<span class="number">100</span>, c,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; c &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int 转 char*</span></span><br><span class="line"><span class="keyword">char</span> c1[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">sprintf</span>(c1, <span class="string">"%d"</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; c1 &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="string">"测试!"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> exception(<span class="string">"测试"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	test1();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (<span class="keyword">const</span> <span class="keyword">char</span> *m) &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; m &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	test2();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (exception  &amp;e) &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span> :</span> <span class="keyword">public</span> exception</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   <span class="function"><span class="keyword">virtual</span> <span class="keyword">char</span> <span class="keyword">const</span>* <span class="title">what</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"myexception"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//随便抛出一个对象都可以</span></span><br></pre></td></tr></table></figure>
<h2 id="文件与流操作"><a href="#文件与流操作" class="headerlink" title="文件与流操作"></a>文件与流操作</h2><blockquote>
<p>C 语言的文件读写操作</p>
<p>头文件:stdio.h</p>
<p>函数原型：FILE <em> fopen(const char </em> path, const char * mode); </p>
<p>path:  操作的文件路径</p>
<p>mode:模式</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>打开一个已有的文本文件，允许读取文件。</td>
</tr>
<tr>
<td>w</td>
<td>打开一个文本文件，允许写入文件。如果文件不存在，则会创建一个新文件。在这里，您的程序会从文件的开头写入内容。如果文件存在，则该会被截断为零长度，重新写入。</td>
</tr>
<tr>
<td>a</td>
<td>打开一个文本文件，以追加模式写入文件。如果文件不存在，则会创建一个新文件。在这里，您的程序会在已有的文件内容中追加内容。</td>
</tr>
<tr>
<td>r+</td>
<td>打开一个文本文件，允许读写文件。</td>
</tr>
<tr>
<td>w+</td>
<td>打开一个文本文件，允许读写文件。如果文件已存在，则文件会被截断为零长度，如果文件不存在，则会创建一个新文件。</td>
</tr>
<tr>
<td>a+</td>
<td>打开一个文本文件，允许读写文件。如果文件不存在，则会创建一个新文件。读取会从文件的开头开始，写入则只能是追加模式。</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//========================================================================</span></span><br><span class="line">FILE *f = fopen(<span class="string">"xxxx\\t.txt"</span>,<span class="string">"w"</span>);</span><br><span class="line"><span class="comment">//写入单个字符</span></span><br><span class="line">fputc(<span class="string">'a'</span>, f);</span><br><span class="line">fclose(f);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FILE *f = fopen(<span class="string">"xxxx\\t.txt"</span>,<span class="string">"w"</span>);</span><br><span class="line"><span class="keyword">char</span> *txt = <span class="string">"123456"</span>;</span><br><span class="line"><span class="comment">//写入以 null 结尾的字符数组</span></span><br><span class="line"><span class="built_in">fputs</span>(txt, f);</span><br><span class="line"><span class="comment">//格式化并输出</span></span><br><span class="line"><span class="built_in">fprintf</span>(f,<span class="string">"%s"</span>,txt);</span><br><span class="line">fclose(f);</span><br><span class="line"></span><br><span class="line"><span class="comment">//========================================================================</span></span><br><span class="line">fgetc(f); <span class="comment">//读取一个字符</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> buff[<span class="number">255</span>];</span><br><span class="line">FILE *f = fopen(<span class="string">"xxxx\\t.txt"</span>, <span class="string">"r"</span>);</span><br><span class="line"><span class="comment">//读取 遇到第一个空格字符停止</span></span><br><span class="line"><span class="built_in">fscanf</span>(f, <span class="string">"%s"</span>, buff);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"1: %s\n"</span>, buff);</span><br><span class="line"></span><br><span class="line"><span class="comment">//最大读取 255-1 个字符</span></span><br><span class="line">fgets(buff, <span class="number">255</span>, f);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"2: %s\n"</span>, buff);</span><br><span class="line">fclose(f);</span><br><span class="line"></span><br><span class="line"><span class="comment">//二进制 I/O 函数</span></span><br><span class="line"><span class="keyword">size_t</span> fread(<span class="keyword">void</span> *ptr, <span class="keyword">size_t</span> size_of_elements, </span><br><span class="line">             <span class="keyword">size_t</span> number_of_elements, FILE *a_file);       </span><br><span class="line"><span class="keyword">size_t</span> fwrite(<span class="keyword">const</span> <span class="keyword">void</span> *ptr, <span class="keyword">size_t</span> size_of_elements, </span><br><span class="line">             <span class="keyword">size_t</span> number_of_elements, FILE *a_file);</span><br><span class="line"><span class="comment">//1、写入/读取数据缓存区</span></span><br><span class="line"><span class="comment">//2、每个数据项的大小</span></span><br><span class="line"><span class="comment">//3、多少个数据项</span></span><br><span class="line"><span class="comment">//4、流</span></span><br><span class="line"><span class="comment">//如：图片、视频等以二进制操作:</span></span><br><span class="line"><span class="comment">//写入buffer 有 1024个字节</span></span><br><span class="line">fwrite(<span class="built_in">buffer</span>,<span class="number">1024</span>,<span class="number">1</span>,f);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>C++ 文件读写操作</p>
<p>\<iostream\> 和 \<fstream\></fstream\></iostream\></p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ofstream</td>
<td>输出文件流，创建文件并向文件写入信息。</td>
</tr>
<tr>
<td>ifstream</td>
<td>输入文件流，从文件读取信息。</td>
</tr>
<tr>
<td>fstream</td>
<td>文件流，且同时具有 ofstream 和 ifstream 两种功能。</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> data[<span class="number">100</span>];</span><br><span class="line"><span class="comment">// 以写模式打开文件</span></span><br><span class="line">ofstream outfile;</span><br><span class="line">outfile.<span class="built_in">open</span>(<span class="string">"XXX\\f.txt"</span>);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"输入你的名字: "</span>;</span><br><span class="line"><span class="comment">//cin 接收终端的输入</span></span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; data;</span><br><span class="line"><span class="comment">// 向文件写入用户输入的数据</span></span><br><span class="line">outfile &lt;&lt; data &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="comment">// 关闭打开的文件</span></span><br><span class="line">outfile.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以读模式打开文件</span></span><br><span class="line">ifstream infile;</span><br><span class="line">infile.<span class="built_in">open</span>(<span class="string">"XXX\\f.txt"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"读取文件"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">infile &gt;&gt; data;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; data &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭</span></span><br><span class="line">infile.<span class="built_in">close</span>();</span><br></pre></td></tr></table></figure>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C-C-%E6%8A%80%E6%9C%AF/">C/C++技术    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/376.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/img/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/08/30/%E9%AB%98%E7%BA%A7Android-%E3%80%90C%20C++%E7%90%86%E8%AE%BA%E5%AE%9E%E6%88%98%E6%8A%80%E6%9C%AF%E3%80%91BAT%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84C%E6%8A%80%E6%9C%AF/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/309.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>高级Android-【C/C++理论实战技术】BAT最常用的C技术</span></div></a></div><div class="next-post pull_right"><a href="/2020/08/29/%E9%87%8D%E6%8B%BEAndroid-%E3%80%90%E5%90%83%E9%80%8F%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97%E3%80%91%E4%B9%8BAndroid%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%EF%BC%88%E5%9B%9B%EF%BC%89%E5%B1%9E%E6%80%A7%E6%9C%8D%E5%8A%A1/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/303.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>重拾Android-【吃透源码系列】之Android系统启动（四）属性服务</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/08/30/高级Android-【音视频、图像处理技术】视觉库OpenCV学习/" title="高级Android-【音视频、图像处理技术】视觉库OpenCV学习"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/321.jpg"><div class="relatedPosts_title">高级Android-【音视频、图像处理技术】视觉库OpenCV学习</div></a></div><div class="relatedPosts_item"><a href="/2020/09/13/高级Android-【C C++理论实战技术】编译原理与语法详解/" title="高级Android-【C/C++理论实战技术】编译原理与语法详解"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/378.jpg"><div class="relatedPosts_title">高级Android-【C/C++理论实战技术】编译原理与语法详解</div></a></div><div class="relatedPosts_item"><a href="/2020/08/30/高级Android-【实战开发系列】哈夫曼解析/" title="高级Android-【实战开发系列】哈夫曼解析"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/339.jpg"><div class="relatedPosts_title">高级Android-【实战开发系列】哈夫曼解析</div></a></div><div class="relatedPosts_item"><a href="/2020/08/30/高级Android-【实战开发系列】微信Matrix-APM源码解析/" title="高级Android-【实战开发系列】微信Matrix APM源码解析"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/338.jpg"><div class="relatedPosts_title">高级Android-【实战开发系列】微信Matrix APM源码解析</div></a></div><div class="relatedPosts_item"><a href="/2020/08/30/高级Android-【实战开发系列】NDK实现播放器内核/" title="高级Android-【实战开发系列】NDK实现播放器内核"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/334.jpg"><div class="relatedPosts_title">高级Android-【实战开发系列】NDK实现播放器内核</div></a></div><div class="relatedPosts_item"><a href="/2020/08/30/高级Android-【实战开发系列】NDK文件拆分加密处理/" title="高级Android-【实战开发系列】NDK文件拆分加密处理"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/325.jpg"><div class="relatedPosts_title">高级Android-【实战开发系列】NDK文件拆分加密处理</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="lv-container" data-id="city" data-uid="MTAyMC80NzU5OC8yNDA5OA=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div></div><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/uPic/自然风景/376.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2020 By Leo·Cheung</div><div class="footer_custom_text">Some of life, you have to go to the great challanges. - By Kobe Bryant</div><div class="icp"><a href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span>浙ICP备19024714号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script async src="/js/search/algolia.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/dist/APlayer.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/LeoCheung0221/tufusiCDN@latest/dist/APlayer.min.js"></script><div class="aplayer" id="player"><script>$(function() {
    $.ajax({
        url: "https://api.i-meto.com/meting/api?server=netease&type=playlist&id=416198729",
        success: function(e) {
            var aplayerList = new APlayer({
            element: document.getElementById('player'),
            narrow: false,
            autoplay: true,
            showlrc: false,
            mutex: true,
            theme: '#FFF0',
            mode: 'random',
            preload: 'metadata',
            fixed:true,
            listmaxheight: '200px',
            music:JSON.parse(e)
            });
            window.aplayers || (window.aplayers = []),
            window.aplayers.push(aplayerList)
        }
    })
    //change aplayer style
    var aplayer  = document.getElementById('player');
    aplayer.style.boxShadow = 'none';
    aplayer.style.marginTop = '10px';
    $('.aplayer-list-light').css('background','#d8e2eb69');
})</script></div></body></html>